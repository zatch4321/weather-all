import{C as y,r as _}from"./vendor-BZcJGg0T.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerPolicy&&(i.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?i.credentials="include":e.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(e){if(e.ep)return;e.ep=!0;const i=n(e);fetch(e.href,i)}})();async function m(o,t){try{const n=new URLSearchParams(t).toString(),r=`${o}?${n}`,e=await fetch(r);if(!e.ok)throw e.status===404?new Error("Resource not found. Please check your input and try again."):e.status===401?new Error("Authentication failed. Please try again later."):new Error(`Server error (${e.status}). Please try again later.`);const i=await e.json();if(!i)throw new Error("No data received from the server");return i}catch(n){throw console.error("API Error:",n),n.name==="TypeError"&&n.message.includes("fetch")?new Error("Network error. Please check your connection and try again."):n}}const l={API_KEY:"cb18fb31c93b21dd3bce12467170e51c",WEATHER_BASE_URL:"https://api.openweathermap.org/data/2.5",GEO_BASE_URL:"https://api.openweathermap.org/geo/1.0",OPEN_METEO_URL:"https://api.open-meteo.com/v1",GEO_URL:"https://geocoding-api.open-meteo.com/v1/search",UNITS:"metric",LOCATION_MAPPING:{kashmir:{name:"Srinagar",lat:34.0837,lon:74.7973,country:"IN",state:"Jammu and Kashmir"}}};async function b(o){var t;try{const n=o.toLowerCase();if(l.LOCATION_MAPPING[n])return l.LOCATION_MAPPING[n];const r=await m(l.GEO_URL,{name:o,count:1,language:"en"});if(!((t=r==null?void 0:r.results)!=null&&t[0]))throw new Error("City not found. Please check the spelling and try again.");const e=r.results[0];return{lat:e.latitude,lon:e.longitude,name:e.name,country:e.country}}catch(n){throw console.error("Geocoding Error:",n),n}}async function v(o){try{const t=await b(o),n=await m(`${l.OPEN_METEO_URL}/forecast`,{latitude:t.lat,longitude:t.lon,current:"temperature_2m,relative_humidity_2m,wind_speed_10m,weather_code,is_day",hourly:"temperature_2m,relative_humidity_2m,wind_speed_10m,is_day",timezone:"auto"}),r=n.current,e=n.hourly;if(!r||!e)throw new Error("Invalid weather data received");const i=r.temperature_2m,c=i*9/5+32;return{current:{temp:i,temp_f:c,humidity:r.relative_humidity_2m,wind_speed:r.wind_speed_10m,weather:C(r.weather_code,r.is_day),is_day:r.is_day,dt:new Date(r.time).getTime()},hourly:e.time.map((s,a)=>({time:new Date(s).getHours()+":00",temp:e.temperature_2m[a],temp_f:e.temperature_2m[a]*9/5+32,humidity:e.relative_humidity_2m[a],wind_speed:e.wind_speed_10m[a],is_day:e.is_day[a]})).slice(0,24),coord:{lat:t.lat,lon:t.lon},name:t.name,country:t.country}}catch(t){throw console.error("Weather API Error:",t),t}}function C(o,t){return{0:{main:t?"Clear":"Clear-night",description:t?"Clear sky":"Clear night sky",icon:t?"clear":"clear-night"},1:{main:t?"Clear":"Clear-night",description:t?"Mainly clear":"Mainly clear night",icon:t?"clear":"clear-night"},2:{main:"Clouds",description:"Partly cloudy",icon:"clouds"},3:{main:"Clouds",description:"Overcast",icon:"clouds"},45:{main:"Mist",description:"Foggy",icon:"mist"},48:{main:"Mist",description:"Depositing rime fog",icon:"mist"},51:{main:"Drizzle",description:"Light drizzle",icon:"drizzle"},53:{main:"Drizzle",description:"Moderate drizzle",icon:"drizzle"},55:{main:"Drizzle",description:"Dense drizzle",icon:"drizzle"},61:{main:"Rain",description:"Slight rain",icon:"rain"},63:{main:"Rain",description:"Moderate rain",icon:"rain"},65:{main:"Rain",description:"Heavy rain",icon:"rain"},71:{main:"Snow",description:"Slight snow fall",icon:"snow"},73:{main:"Snow",description:"Moderate snow fall",icon:"snow"},75:{main:"Snow",description:"Heavy snow fall",icon:"snow"},77:{main:"Snow",description:"Snow grains",icon:"snow"},85:{main:"Snow",description:"Slight snow showers",icon:"snow"},86:{main:"Snow",description:"Heavy snow showers",icon:"snow"},95:{main:"Thunderstorm",description:"Thunderstorm",icon:"thunderstorm"},96:{main:"Thunderstorm",description:"Thunderstorm with slight hail",icon:"thunderstorm"},99:{main:"Thunderstorm",description:"Thunderstorm with heavy hail",icon:"thunderstorm"}}[o]||{main:t?"Clear":"Clear-night",description:"Unknown",icon:t?"clear":"clear-night"}}async function E(o,t){try{const n=await m(`${l.WEATHER_BASE_URL}/air_pollution`,{lat:o,lon:t,appid:l.API_KEY});if(!n||!n.list||!n.list[0])throw new Error("Invalid air quality data received");const r=n.list[0],e=r.components,i=S(e);return{aqi:r.main.aqi,components:e,raw_aqi:i,timestamp:r.dt*1e3}}catch(n){return console.error("Air Quality API Error:",n),{aqi:1,components:{},raw_aqi:50,timestamp:Date.now()}}}function S(o){const t=o.pm2_5;return!t||t<0?50:t<=12?Math.round(50*(t-0)/12+0):t<=35.4?Math.round(49*(t-12.1)/(35.4-12.1)+51):t<=55.4?Math.round(49*(t-35.5)/(55.4-35.5)+101):t<=150.4?Math.round(49*(t-55.5)/(150.4-55.5)+151):t<=250.4?Math.round(99*(t-150.5)/(250.4-150.5)+201):t<=350.4?Math.round(99*(t-250.5)/(350.4-250.5)+301):Math.round(99*(t-350.5)/(500.4-350.5)+401)}function k(o,t,n,r){let e=`Recommended outfit:
`;switch(t<0?(e+=`• Thermal underwear/base layer
`,e+=`• Wool socks
`):t<10&&(e+=`• Long sleeve thermal top
`,e+=`• Warm socks
`),t<15?e+=`• Warm sweater or fleece
`:t<20&&(e+=`• Light sweater or long sleeve shirt
`),o){case"Clear":r||(e+=`• Extra warm layer for night temperatures
`),t>=25?(e+=`• Light, breathable clothing
`,e+=`• Sun protection (hat, sunglasses)
`):t>=15?e+=`• Light jacket or cardigan
`:(e+=`• Warm winter coat
`,e+=`• Gloves and beanie
`);break;case"Rain":case"Drizzle":e+=`• Waterproof jacket
`,e+=`• Water-resistant boots
`,e+=`• Umbrella
`;break;case"Snow":e+=`• Heavy winter coat
`,e+=`• Waterproof snow boots
`,e+=`• Insulated gloves
`,e+=`• Warm hat and scarf
`;break}return n>=80?(e+=`
High humidity tips:
`,e+=`• Choose moisture-wicking fabrics
`,e+=`• Avoid cotton clothing
`):n>=60&&(e+=`
Moderate humidity tip:
`,e+=`• Wear breathable fabrics
`),e}const q={clear:"wi wi-day-sunny","clear-night":"wi wi-night-clear",clouds:"wi wi-cloudy",rain:"wi wi-rain",drizzle:"wi wi-sprinkle",snow:"wi wi-snow",mist:"wi wi-fog",thunderstorm:"wi wi-thunderstorm",haze:"wi wi-day-haze",fog:"wi wi-fog",smoke:"wi wi-smoke",dust:"wi wi-dust",sand:"wi wi-sandstorm"};y.register(..._);let u=null;function L(o,t){u&&u.destroy();const n=document.getElementById(t).getContext("2d");u=new y(n,{type:"line",data:{labels:o.map(r=>r.time),datasets:[{label:"Temperature (°C)",data:o.map(r=>r.temp),borderColor:"#ffffff",backgroundColor:"rgba(255, 255, 255, 0.1)",tension:.4,fill:!0},{label:"Feels Like (°C)",data:o.map(r=>r.feels_like),borderColor:"#ffeb3b",backgroundColor:"transparent",borderDash:[5,5],tension:.4}]},options:{responsive:!0,plugins:{legend:{position:"top",labels:{color:"#ffffff"}}},scales:{y:{ticks:{color:"#ffffff",callback:r=>`${r}°C`},grid:{color:"rgba(255, 255, 255, 0.1)"}},x:{ticks:{color:"#ffffff"},grid:{color:"rgba(255, 255, 255, 0.1)"}}}}})}function M(o){return o<=50?{level:"Good",description:"Air quality is satisfactory, and air pollution poses little or no risk.",color:"#00C853"}:o<=100?{level:"Moderate",description:"Air quality is acceptable. However, there may be a risk for some people.",color:"#FFD600"}:o<=150?{level:"Unhealthy for Sensitive Groups",description:"Members of sensitive groups may experience health effects.",color:"#FF9100"}:o<=200?{level:"Unhealthy",description:"Everyone may begin to experience health effects.",color:"#FF3D00"}:o<=300?{level:"Very Unhealthy",description:"Health alert: everyone may experience more serious health effects.",color:"#D50000"}:{level:"Hazardous",description:"Health warnings of emergency conditions. Everyone is more likely to be affected.",color:"#7B1FA2"}}function A(o,t=!0){const n=Math.round(o*10)/10,r=Math.round((n*9/5+32)*10)/10;return t?`${n}°C (${r}°F)`:{celsius:n,fahrenheit:r}}document.addEventListener("DOMContentLoaded",()=>{const o=document.querySelector(".search input"),t=document.querySelector(".search button"),n=document.querySelector(".weather-icon"),r=document.querySelector(".weather"),e=document.querySelector(".error");async function i(s){try{e.style.display="none",r.style.display="none",document.querySelector(".outfit-recommendation").textContent="Fetching weather details...";const a=await v(s),h=await E(a.coord.lat,a.coord.lon);document.querySelector(".city").textContent=`${a.name}, ${a.country}`,document.querySelector(".temp").textContent=A(a.current.temp),document.querySelector(".humidity").textContent=`${a.current.humidity}%`,document.querySelector(".wind").textContent=`${Math.round(a.current.wind_speed)} km/h`;const f=a.current.weather,w=q[f.icon];n.className=`weather-icon ${w}`;const d=M(h.raw_aqi),p=document.querySelector(".air-quality");p.style.display="block",document.querySelector(".aqi-level").textContent=`${d.level} (${h.raw_aqi})`,document.querySelector(".aqi-description").textContent=d.description,p.style.backgroundColor=`${d.color}22`,document.querySelector(".aqi-level").style.color=d.color;const g=k(f.main,a.current.temp,a.current.humidity,a.current.is_day);document.querySelector(".outfit-recommendation").innerHTML=g.replace(/\n/g,"<br>"),L(a.hourly,"tempChart"),r.style.display="block"}catch(a){e.style.display="block",e.querySelector("p").textContent=a.message,r.style.display="none"}}function c(){const s=o.value.trim();s&&i(s)}t.addEventListener("click",c),o.addEventListener("keypress",s=>{s.key==="Enter"&&c()})});
